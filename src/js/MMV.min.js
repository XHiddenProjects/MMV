/*
@name: Multi-Media Viewer
@version: 0.0.2
@author: XHiddenProjects
@module-type: minified
@website: https://github.com/xhiddenprojects
*/
class MMV{constructor(e){this.target=document.querySelector(e)}init(){this.target.setAttribute("mmv-status","active")}gallery(e={}){if(e.hasOwnProperty("allowDescription")&&e.allowDescription&&[...this.target.querySelectorAll("img")].forEach((e=>{let t=e.outerHTML,r=document.createElement("div");r.className="imgviewer-container",r.innerHTML=t,r.innerHTML+='<div class="imgviewer-desc"><span class="text">'+(e.getAttribute("img-desc")&&""!==e.getAttribute("img-desc")?e.getAttribute("img-desc"):"")+"</span></div>",e.parentNode.replaceChild(r,e)})),e.cols)if("auto"===e.cols){document.body.clientWidth<1e3&&(e.cols=2),this.target.style.gridTemplateColumns="repeat("+parseInt(e.cols)+", 1fr)"}else"scroll"===e.cols&&this.target.setAttribute("scrollable",!0);e.hover&&this.target.classList.add("imgviewer-hover"),!0!==e.zoom&&!0!==e.zoom.active||(this.target.classList.add("imgviewer-zoom"),this.target.innerHTML+='<div class="imgviewer-display'+(e.zoom.static?" static":"")+'" '+(e.zoom.transition?'imgviewer-animate="'+e.zoom.transition+'"':"")+'>\n\t\t\t\t<div class="imgviewer-displayNav">\n\t\t\t\t\t<span class="imgviewer-display-close"></span>\n\t\t\t\t\t<button data-img-url="" class="imgviewer-dwnld" onclick="downloadImg(this);">Download</button>\n\t\t\t\t\t<button data-img-url="" onclick="copyImgURL(this);">Copy</button>\n\t\t\t\t\t<button data-img-url="" onclick="copyImg(this);">Clone</button>\n\t\t\t\t\t<a href="" target="_blank" class="imgviewer-displayRaw"><button>Open</button></a>\n\t\t\t\t</div>\n\t\t\t\t<div class="panel">\n\t\t\t\t\t<img src="" class="imgviewer-displayImg"/>\n\t\t\t\t</div>\n\t\t\t</div>',[...this.target.querySelectorAll("img:not(.imgviewer-display img)")].forEach((e=>{let t=e.src,r=e.alt;e.addEventListener("click",((e,a=t,i=r)=>{this.target.querySelector(".imgviewer-display .imgviewer-displayImg").src=a,[...this.target.querySelectorAll(".imgviewer-display .imgviewer-dwnld, .imgviewer-display .imgviewer-displayRaw")].forEach((e=>{e.href=a})),this.target.querySelector(".imgviewer-display .imgviewer-dwnld").download=i,[...this.target.querySelectorAll(".imgviewer-display button[data-img-url]")].forEach((e=>{e.setAttribute("data-img-url",a)})),this.target.querySelector(".imgviewer-display").classList.add("show")}))})),this.target.querySelector(".imgviewer-display-close").addEventListener("click",(()=>{this.target.querySelector(".imgviewer-display .imgviewer-displayImg").src="",[...this.target.querySelectorAll(".imgviewer-display .imgviewer-dwnld, .imgviewer-display .imgviewer-displayRaw")].forEach((e=>{e.href=""})),this.target.querySelector(".imgviewer-display .imgviewer-dwnld").download="",[...this.target.querySelectorAll(".imgviewer-display button[data-img-url]")].forEach((e=>{e.setAttribute("data-img-url","")})),this.target.querySelector(".imgviewer-display").classList.remove("show")})),e.zoom.static||this.target.querySelector(".imgviewer-display .panel:not(.static)").addEventListener("click",(()=>{this.target.querySelector(".imgviewer-display .imgviewer-displayImg").src="",[...this.target.querySelectorAll(".imgviewer-display .imgviewer-dwnld, .imgviewer-display .imgviewer-displayRaw")].forEach((e=>{e.href=""})),this.target.querySelector(".imgviewer-display .imgviewer-dwnld").download="",[...this.target.querySelectorAll(".imgviewer-display button[data-img-url]")].forEach((e=>{e.setAttribute("data-img-url","")})),this.target.querySelector(".imgviewer-display").classList.remove("show")})))}carousel(e={}){var t=0,r=[...this.target.querySelectorAll("img")].length,a="";this.target.setAttribute("slide-index",1),[...this.target.querySelectorAll("img")].forEach((a=>{let i=a.outerHTML,l=document.createElement("div");l.className="slide fade",l.innerHTML='<div class="imgviewer-num">'+(t+=1)+"/"+r+"</div>",l.innerHTML+=i,e.hasOwnProperty("allowDescription")&&e.allowDescription&&(l.innerHTML+='<div class="imgviewer-desc">'+(a.getAttribute("img-desc")&&""!==a.getAttribute("img-desc")?a.getAttribute("img-desc"):"")+"</div>"),a.parentNode.replaceChild(l,a)})),"auto"===e.control.toLowerCase()?(this.target.setAttribute("imgviewer-carousel","auto"),a+=""):(this.target.setAttribute("imgviewer-carousel","manual"),a+=' <a class="prev" onclick="slideMove(this.parentElement,this.parentElement.getAttribute(\'slide-index\'),-1)">&#10094;</a>\n\t\t\t<a class="next" onclick="slideMove(this.parentElement,this.parentElement.getAttribute(\'slide-index\'),1)">&#10095;</a>'),a+='<br/>\n\t\t<div style="text-align:center">\n\t\t\t';for(let t=0;t<r;t++)a+='<span class="dot" '+("auto"===e.control.toLowerCase()?"":'onclick="currentSlide(this.parentElement.parentElement,'+(t+1)+')"')+"></span>";a+="</div>",this.target.innerHTML+=a,"auto"===e.control.toLowerCase()?setInterval((()=>{showSlidesAuto(this.target,1)}),e.timeout?e.timeout:2e3):showSlides(this.target,parseInt(this.target.getAttribute("slide-index")),parseInt(this.target.getAttribute("slide-index"))),!0!==e.zoom&&!0!==e.zoom.active||(this.target.classList.add("imgviewer-zoom"),this.target.innerHTML+='<div class="imgviewer-display'+(e.zoom.static?" static":"")+'" '+(e.zoom.transition?'imgviewer-animate="'+e.zoom.transition+'"':"")+'>\n\t\t\t\t<div class="imgviewer-displayNav">\n\t\t\t\t\t<span class="imgviewer-display-close"></span>\n\t\t\t\t\t<button data-img-url="" class="imgviewer-dwnld" onclick="downloadImg(this);">Download</button>\n\t\t\t\t\t<button data-img-url="" onclick="copyImgURL(this);">Copy</button>\n\t\t\t\t\t<button data-img-url="" onclick="copyImg(this);">Clone</button>\n\t\t\t\t\t<a href="" target="_blank" class="imgviewer-displayRaw"><button>Open</button></a>\n\t\t\t\t</div>\n\t\t\t\t<div class="panel">\n\t\t\t\t\t<img src="" class="imgviewer-displayImg"/>\n\t\t\t\t</div>\n\t\t\t</div>',[...this.target.querySelectorAll("img:not(.imgviewer-display img)")].forEach((e=>{let t=e.src,r=e.alt;e.addEventListener("click",((e,a=t,i=r)=>{this.target.querySelector(".imgviewer-display .imgviewer-displayImg").src=a,[...this.target.querySelectorAll(".imgviewer-display .imgviewer-dwnld, .imgviewer-display .imgviewer-displayRaw")].forEach((e=>{e.href=a})),this.target.querySelector(".imgviewer-display .imgviewer-dwnld").download=i,[...this.target.querySelectorAll(".imgviewer-display button[data-img-url]")].forEach((e=>{e.setAttribute("data-img-url",a)})),this.target.querySelector(".imgviewer-display").classList.add("show")}))})),this.target.querySelector(".imgviewer-display-close").addEventListener("click",(()=>{this.target.querySelector(".imgviewer-display .imgviewer-displayImg").src="",[...this.target.querySelectorAll(".imgviewer-display .imgviewer-dwnld, .imgviewer-display .imgviewer-displayRaw")].forEach((e=>{e.href=""})),this.target.querySelector(".imgviewer-display .imgviewer-dwnld").download="",[...this.target.querySelectorAll(".imgviewer-display button[data-img-url]")].forEach((e=>{e.setAttribute("data-img-url","")})),this.target.querySelector(".imgviewer-display").classList.remove("show")})),e.zoom.static||this.target.querySelector(".imgviewer-display .panel:not(.static)").addEventListener("click",(()=>{this.target.querySelector(".imgviewer-display .imgviewer-displayImg").src="",[...this.target.querySelectorAll(".imgviewer-display .imgviewer-dwnld, .imgviewer-display .imgviewer-displayRaw")].forEach((e=>{e.href=""})),this.target.querySelector(".imgviewer-display .imgviewer-dwnld").download="",[...this.target.querySelectorAll(".imgviewer-display button[data-img-url]")].forEach((e=>{e.setAttribute("data-img-url","")})),this.target.querySelector(".imgviewer-display").classList.remove("show")})))}stack(e={}){var t=0,r=1,a=0,i=0;let l="<style>";[...this.target.querySelectorAll("img")].forEach((n=>{let s=n.outerHTML,o=document.createElement("div");o.className="box view",o.tabIndex=t++,o.innerHTML+=s,e.hasOwnProperty("allowDescription")&&e.allowDescription&&(o.innerHTML+='<div class="imgviewer-desc"><span>'+(n.getAttribute("img-desc")&&""!==n.getAttribute("img-desc")?n.getAttribute("img-desc"):"")+"</span></div>"),1==r?(l+='[imgviewer-status][img-type="stack"] .view:nth-of-type('+r+") {\n\t\t\t\t\ttransform: translateZ("+a+"px) translateX("+a+"px);\n\t\t\t\t}\n",a-=40):l+='[imgviewer-status][img-type="stack"] .view:nth-of-type('+r+") {\n\t\t\t\t\ttransform: translateZ("+(a-=40)+'px) translateX(0px);\n\t\t\t\t}\n\n\t\t\t\t[imgviewer-status][img-type="stack"] .view:nth-of-type('+r+") img{\n\t\t\t\t\tfilter: blur("+(i+=1)+"px);\n\t\t\t\t}",r++,n.parentNode.replaceChild(o,n)})),l+="</style>",this.target.innerHTML+=l}lightbox(e={}){var t=0,r=0,a='<div class="modal">\n\t\t\t<span class="close cursor" onclick="closeModal(this);">&times;</span>\n\t\t\t<div class="modal-content">';this.target.setAttribute("slide-index",1),[...this.target.querySelectorAll("img")].forEach((e=>{e.classList.add("hover-shadow"),e.setAttribute("onclick","openModal(this.parentElement);lightboxCurrentSlide(this.parentElement.parentElement,"+(t+=1)+");");let r=e.outerHTML,i=document.createElement("div");i.className="col",i.innerHTML=r,a+=' <div class="slide fade">\n\t\t\t<div class="numbertext">'+t+" / "+[...this.target.querySelectorAll("img")].length+'</div>\n\t\t\t<img src="'+e.src+'" style="width:100%">\n\t\t  </div>',e.parentNode.replaceChild(i,e)})),a+=' \x3c!-- Next/previous controls --\x3e\n\t\t<a class="prev" onclick="lightboxplusSlides(this.parentElement.parentElement.parentElement,-1)">&#10094;</a>\n\t\t<a class="next" onclick="lightboxplusSlides(this.parentElement.parentElement.parentElement,1)">&#10095;</a>'+(e.hasOwnProperty("allowDescription")&&e.allowDescription?'<div class="caption-container">\n\t\t  <p class="caption"></p>\n\t\t</div>':'<div class="caption-container"><p></p></div>')+"\n\t\t",[...this.target.querySelectorAll("img")].forEach((e=>{a+='<div class="col">\n\t\t\t<img class="demo" src="'+e.src+'" onclick="lightboxCurrentSlide(this.parentElement.parentElement.parentElement.parentElement,'+(r+=1)+')" alt="'+e.alt+'" img-desc="'+e.getAttribute("img-desc")+'">\n\t\t  </div>'})),a+="\n\t\t</div>",this.target.innerHTML+=a}background(e={}){if(e.hasOwnProperty("multiple")&&e.multiple)this.target.setAttribute("multiple",""),this.target.querySelector("img")?[...this.target.querySelectorAll("img")].forEach((e=>{e.outerHTML='<div class="bg-image" style="background-image:url('+e.src+')"></div>'})):this.target.querySelector("video")&&[...this.target.querySelectorAll("video")].forEach((e=>{e.outerHTML='<div class="bg-image"><video loop autoplay muted src="'+e.querySelector("source").src+'"></video></div>'}));else if(this.target.querySelector("img")){if(this.target.querySelectorAll("img").length>1)return console.error("background must be only 1 image"),!1;this.target.setAttribute("style","background-image:url("+this.target.querySelectorAll("img")[0].src+");"),this.target.querySelector("img").outerHTML="\x3c!--"+this.target.querySelector("img").outerHTML+"--\x3e"}else if(this.target.querySelector("video")){if(this.target.querySelectorAll("video").length>1)return console.error("background must be only 1 video"),!1;this.target.innerHTML='<video loop autoplay muted src="'+this.target.querySelectorAll("video source")[0].src+'"></video>'}}heroimage(e={}){if(!this.target.hasAttribute("hero-url"))return console.error("hero-url attribute does not exists"),!1;this.target.setAttribute("style","background-image:linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+this.target.getAttribute("hero-url")+");"),this.target.innerHTML='<div class="hero-text">'+this.target.innerHTML+"</div>"}video(e={}){if(this.target.querySelectorAll("video").length>1)return console.error("You must only have one video in the frame"),!1;{let t,r;this.target.tabIndex="1",this.target.setAttribute("video-speed",1),this.target.setAttribute("video-quality","auto"),this.target.setAttribute("video-subtitle","none"),this.target.addEventListener("keydown",(t=>{let r=t.keyCode||t.witch;75==r||32==r?changePlayState(this.target.querySelector(".video-controls .playstatebtn")):77==r?toggleVolume(this.target.querySelector(".video-controls .volume-control")):73==r?toggleMiniplayer(this.target.querySelector(".miniplayer .miniplayerBtn")):70==r||27==r?(this.target.classList.contains("fullscreen")||70==r)&&toggleFullScreen(this.target.querySelector(".fullscreen .fullscreenBtn")):37==r?setTime(this.target.querySelector("video"),e.hasOwnProperty("skip")&&(e.skip,1)?e.skip:5,"sub"):39==r&&setTime(this.target.querySelector("video"),e.hasOwnProperty("skip")&&(e.skip,1)?e.skip:5,"add")})),this.target.querySelector("video").setAttribute("onloadedmetadata","updateTime(this);"),this.target.querySelector("video").setAttribute("ontimeupdate","updateProgress(this);updateTime(this);"),this.target.innerHTML='<div class="video-container">'+this.target.innerHTML+'\n\t\t\t<div class="video-footer">\n\t\t\t\t<div class="video-progress" onmouseout="resetProgressHover(this);" onmousemove="changeProgressHover(event,this);" onclick="changeProgressState(event,this);">\n\t\t\t\t\t<div class="video-progress-hover">\n\t\t\t\t\t\t<div class="time-popup"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="video-progress-bg" style="'+(e.hasOwnProperty("bar")&&"string"==typeof e.bar?"background-color:"+e.bar+";":"")+'width:0%;"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="video-controls">\n\t\t\t\t\t<div class="video-controls-container">\n\t\t\t\t\t\t<button title="'+r+' (k)" onclick="changePlayState(this);" class="playstatebtn '+t+'"></button>\n\t\t\t\t\t\t<div class="control-volume">\n\t\t\t\t\t\t\t<button title="Mute (m)" class="volume-control control-unmute" onclick="toggleVolume(this)"></button>\n\t\t\t\t\t\t\t<input type="range" min="0" max="1" step="0.1" value="1" class="volume-slider form-range" oninput="changeVolume(this)"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="timeStamp"><span class="currentTime">0:00</span>/<span class="durTime">0:00</span></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="video-controls-container">\n\t\t\t\t\t\t<div class="autoplay-switch">\n\t\t\t\t\t\t\t<input type="checkbox" class="autoplay-input" role="switch" title="Autoplay is off" onclick="setAutoPlay(this);"/>\n\t\t\t\t\t\t\t<label class="autoplay-label"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="btn-group dropup">\n\t\t\t\t\t\t<button type="button" class="btn btn-secondary dropdown-toggle settingBtn" data-bs-auto-close="outside" data-bs-toggle="dropdown" aria-expanded="false">\n\t\t\t\t\t\t\t<i class="fa-solid fa-gear"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<ul class="dropdown-menu">\n\t\t\t\t\t\t\t<li><a href="#" class="dropdown-item"  onclick="changeSpeed(this.querySelector(\'span\'));"><i class="fa-solid fa-rotate-right"></i> Playback speed <span class="settingBadge vidspeed">Normal</span></a></li>\n\t\t\t\t\t\t\t<li><a href="#" class="dropdown-item"  onclick="changeLoop(this.querySelector(\'span\'));"><i class="fa-solid fa-repeat"></i> Loop <span class="settingBadge vidLoop">Off</span></a></li>\n\t\t\t\t\t\t\t<li><a href="#" class="dropdown-item"  onclick=\'changeSubtitle(this.querySelector("span"), '+(e.hasOwnProperty("subtitles")?JSON.stringify(e.subtitles):'"subtitles":{"items":{"Off":"Off"}}')+');\'><i class="fa-solid fa-closed-captioning"></i> Subtitles <span class="settingBadge vidsubtitle">Off</span> <span class="vidsubtitle-label">Off</span></a></li>\n\t\t\t\t\t\t\t<li><a href="#" class="dropdown-item"  onclick=\'changeQuality(this.querySelector("span"), '+(e.hasOwnProperty("quality")?JSON.stringify(e.quality):'"quality":{"Auto":""}')+');\'><i class="fa-solid fa-sliders"></i> Quality <span class="settingBadge vidquality">Auto</span></a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="miniplayer">\n\t\t\t\t\t\t<button class="miniplayerBtn" title="Miniplayer (i)" onclick="toggleMiniplayer(this);"><i class="fa-light fa-square-arrow-down-right"></i></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="fullscreen">\n\t\t\t\t\t\t<button class="fullscreenBtn" title="Fullscreen (f)" onclick="toggleFullScreen(this);"><i class="fa-solid fa-expand"></i></button>\n\t\t]\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>'}}audio(e={}){if(!this.target.querySelector("audio")||1!=this.target.querySelectorAll("audio").length)return console.error("You must have only one audio"),!1;{this.target.setAttribute("audio-speed",1);let t=this.target.querySelectorAll("audio")[0];t.setAttribute("onloadedmetadata","updateTime(this)"),t.setAttribute("ontimeupdate","updateProgress(this, 'audio');updateTime(this);"),this.target.innerHTML='<button title="play" onclick="changePlayState(this,\'\',\'audio\');" class="playstatebtn control-play"></button>&nbsp;<span class="currentTime">0:00</span>/<span class="durTime">0:00</span>&nbsp;\n\t\t\t<div class="audioBar"  onmouseout="resetProgressHover(this,\'audio\');" onmousemove="changeProgressHover(event,this,\'audio\');" onclick="changeProgressState(event,this,\'audio\');">\n\t\t\t\t<div class="audio-progress-hover">\n\t\t\t\t\t\t<div class="time-popup"></div>\n\t\t\t\t</div>\n\t\t\t\t<div'+(e.hasOwnProperty("bar")&&"string"==typeof e.bar?' style="background-color:'+e.bar+'"':"")+' class="audioBar-progress"></div>\n\t\t\t</div>'+t.outerHTML+'<div class="control-volume">\n\t\t\t<button title="Mute" class="volume-control control-unmute" onclick="toggleVolume(this,\'audio\')"></button>\n\t\t\t<input type="range" min="0" max="1" step="0.1" value="1" class="volume-slider form-range" oninput="changeVolume(this,\'\',\'audio\')"/>\n\t\t</div>\n\t\t<div class="autoplay-switch">\n\t\t\t\t<input type="checkbox" class="autoplay-input" role="switch" title="Autoplay is off" onclick="setAutoPlay(this,\'audio\');"/>\n\t\t\t\t<label class="autoplay-label"></label>\n\t\t</div>\n\t\t<div class="btn-group dropup audio-options">\n\t\t\t<button type="button" class="btn border-0 bg-transparent dropdown-toggle" data-bs-auto-close="outside" data-bs-toggle="dropdown" aria-expanded="false">\n\t\t\t\t<i class="fa-solid fa-ellipsis-vertical"></i>\n\t\t\t</button>\n\t\t\t<ul class="dropdown-menu">\n\t\t\t\t<li><a href="#" class="dropdown-item"  onclick="changeSpeed(this.querySelector(\'span\'),\'audio\');"><i class="fa-solid fa-rotate-right"></i> Playback speed <span class="settingBadge audiopeed">Normal</span></a></li>\n\t\t\t\t<li><a href="#" class="dropdown-item"  onclick="changeLoop(this.querySelector(\'span\'),\'audio\');"><i class="fa-solid fa-repeat"></i> Loop <span class="settingBadge audioLoop">Off</span></a></li>\n\t\t\t</ul>\n\t\t</div>'}}}function changePlayState(e,t="",r="video"){"video"===r?""!==t?"pause"===t?(e.classList.remove("control-pause"),e.classList.add("control-play"),e.parentElement.parentElement.parentElement.parentElement.parentElement.setAttribute("video-status","paused"),e.parentElement.parentElement.parentElement.parentElement.querySelector("video").pause(),e.title="Play (k)"):(e.classList.remove("control-play"),e.classList.add("control-pause"),e.parentElement.parentElement.parentElement.parentElement.parentElement.setAttribute("video-status","playing"),e.parentElement.parentElement.parentElement.parentElement.querySelector("video").play(),e.title="Pause (k)"):e.classList.contains("control-pause")?(e.classList.remove("control-pause"),e.classList.add("control-play"),e.parentElement.parentElement.parentElement.parentElement.parentElement.setAttribute("video-status","paused"),e.parentElement.parentElement.parentElement.parentElement.querySelector("video").pause(),e.title="Play (k)"):(e.classList.remove("control-play"),e.classList.add("control-pause"),e.parentElement.parentElement.parentElement.parentElement.parentElement.setAttribute("video-status","playing"),e.parentElement.parentElement.parentElement.parentElement.querySelector("video").play(),e.title="Pause (k)"):""!==t?"pause"===t?(e.classList.remove("control-pause"),e.classList.add("control-play"),e.parentElement.setAttribute("audio-status","paused"),e.parentElement.querySelector("audio").pause(),e.title="Play"):(e.classList.remove("control-play"),e.classList.add("control-pause"),e.parentElement.setAttribute("audio-status","playing"),e.parentElement.querySelector("audio").play(),e.title="Pause"):e.classList.contains("control-pause")?(e.classList.remove("control-pause"),e.classList.add("control-play"),e.parentElement.setAttribute("audio-status","paused"),e.parentElement.querySelector("audio").pause(),e.title="Play"):(e.classList.remove("control-play"),e.classList.add("control-pause"),e.parentElement.setAttribute("audio-status","playing"),e.parentElement.querySelector("audio").play(),e.title="Pause")}function updateProgress(e,t="video"){let r=e.currentTime,a=e.duration;"video"===t?(e.parentElement.querySelector(".video-progress-bg").style.width=r/a*100+"%",r/a*100==100&&(e.parentElement.parentElement.setAttribute("video-status","paused"),e.parentElement.querySelector(".control-pause").className="playstatebtn control-play")):(e.parentElement.querySelector(".audioBar-progress").style.width=r/a*100+"%",r/a*100==100&&(e.parentElement.parentElement.setAttribute("audio-status","paused"),e.parentElement.querySelector(".control-pause").className="playstatebtn control-play"))}function changeProgressState(e,t,r="video"){if("video"===r){const r=t.parentElement.parentElement.querySelector("video"),a=e.offsetX/t.offsetWidth*r.duration;r.currentTime=a}else{const r=t.parentElement.querySelector("audio"),a=e.offsetX/t.offsetWidth*r.duration;r.currentTime=a}}function toggleVolume(e,t="video"){"video"===t?e.classList.contains("control-unmute")?(e.classList.remove("control-unmute"),e.classList.add("control-mute"),e.parentElement.querySelector("input").value="0",e.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector("video").volume=0,e.title="Unmute (m)"):(e.classList.remove("control-mute"),e.classList.add("control-unmute"),e.parentElement.querySelector("input").value="1",e.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector("video").volume=1,e.title="Mute (m)"):e.classList.contains("control-unmute")?(e.classList.remove("control-unmute"),e.classList.add("control-mute"),e.parentElement.querySelector("input").value="0",e.parentElement.parentElement.querySelector("audio").volume=0,e.title="Unmute"):(e.classList.remove("control-mute"),e.classList.add("control-unmute"),e.parentElement.querySelector("input").value="1",e.parentElement.parentElement.querySelector("audio").volume=1,e.title="Mute")}function changeProgressHover(e,t,r="video"){if("video"===r){const r=t.parentElement.parentElement.querySelector("video"),a=e.offsetX/t.offsetWidth;t.querySelector(".video-progress-hover").style.width=100*a+"%",durHrs=Math.floor(100*a*r.duration/100/3600),durMin=Math.floor(100*a*r.duration/100%3600/60),durSec=Math.floor(100*a*r.duration/100%3600%60),t.querySelector(".video-progress-hover .time-popup").innerText=durHrs>=1?durHrs+":"+(durMin<10?"0"+durMin:durMin)+":"+(durSec<10?"0"+durSec:durSec):durMin+":"+(durSec<10?"0"+durSec:durSec),t.querySelector(".video-progress-hover .time-popup").style.left=e.offsetX+"px"}else{const r=t.parentElement.querySelector("audio"),a=e.offsetX/t.offsetWidth;t.querySelector(".audio-progress-hover").style.width=100*a+"%",durHrs=Math.floor(100*a*r.duration/100/3600),durMin=Math.floor(100*a*r.duration/100%3600/60),durSec=Math.floor(100*a*r.duration/100%3600%60),t.querySelector(".audio-progress-hover .time-popup").innerText=durHrs>=1?durHrs+":"+(durMin<10?"0"+durMin:durMin)+":"+(durSec<10?"0"+durSec:durSec):durMin+":"+(durSec<10?"0"+durSec:durSec),t.querySelector(".audio-progress-hover .time-popup").style.left=e.offsetX+"px"}}function updateTime(e){let t,r,a,i,l,n;a=Math.floor(e.currentTime/3600),r=Math.floor(e.currentTime%3600/60),t=Math.floor(e.currentTime%3600%60),n=Math.floor(e.duration/3600),l=Math.floor(e.duration%3600/60),i=Math.floor(e.duration%3600%60),e.parentElement.querySelector(".durTime")&&(e.parentElement.querySelector(".durTime").innerHTML=n>=1?n+":"+(l<10?"0"+l:l)+":"+(i<10?"0"+i:i):l+":"+(i<10?"0"+i:i)),e.parentElement.querySelector(".currentTime")&&(e.parentElement.querySelector(".currentTime").innerHTML=a>=1?a+":"+(r<10?"0"+r:r)+":"+(t<10?"0"+t:t):r+":"+(t<10?"0"+t:t))}function setTime(e,t,r){switch(r.toLowerCase()){case"add":e.currentTime+=t;break;case"sub":e.currentTime-=t}}function changeVolume(e,t="video"){"video"===t?(0==e.value?(e.parentElement.querySelector("button").classList.remove("control-unmute"),e.parentElement.querySelector("button").classList.add("control-mute")):(e.parentElement.querySelector("button").classList.remove("control-mute"),e.parentElement.querySelector("button").classList.add("control-unmute")),e.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector("video").volume=e.value):(0==e.value?(e.parentElement.querySelector("button").classList.remove("control-unmute"),e.parentElement.querySelector("button").classList.add("control-mute")):(e.parentElement.querySelector("button").classList.remove("control-mute"),e.parentElement.querySelector("button").classList.add("control-unmute")),e.parentElement.parentElement.querySelector("audio").volume=e.value)}function resetProgressHover(e,t="video"){"video"===t?e.querySelector(".video-progress-hover").style.width="0%":e.querySelector(".audio-progress-hover").style.width="0%"}function toggleMiniplayer(e){e.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.toggle("miniplayer"),e.querySelector("i").classList.toggle("fa-square-arrow-down-right"),e.querySelector("i").classList.toggle("fa-square-arrow-up-left")}function toggleFullScreen(e){e.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.toggle("fullscreen"),e.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.classList.contains("fullscreen")?e.parentElement.parentElement.parentElement.parentElement.parentElement.innerHTML+='<div class="fullscreenMode">\n\t\t\tPress <span class="key">Esc</span> to exit full screen.\n\t\t</div>':e.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector(".fullscreenMode").remove(),e.querySelector("i").classList.toggle("fa-expand"),e.querySelector("i").classList.toggle("fa-compress")}function setAutoPlay(e,t="video"){if("video"===t){const t=e.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;e.checked?(t.querySelector("video").autoplay=!0,changePlayState(t.querySelector(".playstatebtn"),"playing"),e.title="Autoplay is on"):(t.querySelector("video").autoplay=!1,e.title="Autoplay is off")}else{const t=e.parentElement.parentElement.parentElement;e.checked?(t.querySelector("audio").autoplay=!0,changePlayState(t.querySelector(".playstatebtn"),"playing","audio"),e.title="Autoplay is on"):(t.querySelector("audio").autoplay=!1,e.title="Autoplay is off")}}function changeSpeed(e,t="video"){if("video"===t){const t=e.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;let r=t.getAttribute("video-speed");switch(parseFloat(r)){case.25:e.innerHTML="x0.5",t.setAttribute("video-speed",.5),t.querySelector("video").playbackRate=.5;break;case.5:e.innerHTML="x0.75",t.setAttribute("video-speed",.75),t.querySelector("video").playbackRate=.75;break;case.75:e.innerHTML="Normal",t.setAttribute("video-speed",1),t.querySelector("video").playbackRate=1;break;case 1:e.innerHTML="x1.25",t.setAttribute("video-speed",1.25),t.querySelector("video").playbackRate=1.25;break;case 1.25:e.innerHTML="x1.5",t.setAttribute("video-speed",1.5),t.querySelector("video").playbackRate=1.5;break;case 1.5:e.innerHTML="x1.75",t.setAttribute("video-speed",1.75),t.querySelector("video").playbackRate=1.75;break;case 1.75:e.innerHTML="x2",t.setAttribute("video-speed",2),t.querySelector("video").playbackRate=2;break;case 2:e.innerHTML="x0.25",t.setAttribute("video-speed",.25),t.querySelector("video").playbackRate=.25}}else{const t=e.parentElement.parentElement.parentElement.parentElement.parentElement;let r=t.getAttribute("audio-speed");switch(parseFloat(r)){case.25:e.innerHTML="x0.5",t.setAttribute("audio-speed",.5),t.querySelector("audio").playbackRate=.5;break;case.5:e.innerHTML="x0.75",t.setAttribute("audio-speed",.75),t.querySelector("audio").playbackRate=.75;break;case.75:e.innerHTML="Normal",t.setAttribute("audio-speed",1),t.querySelector("audio").playbackRate=1;break;case 1:e.innerHTML="x1.25",t.setAttribute("audio-speed",1.25),t.querySelector("audio").playbackRate=1.25;break;case 1.25:e.innerHTML="x1.5",t.setAttribute("audio-speed",1.5),t.querySelector("audio").playbackRate=1.5;break;case 1.5:e.innerHTML="x1.75",t.setAttribute("audio-speed",1.75),t.querySelector("audio").playbackRate=1.75;break;case 1.75:e.innerHTML="x2",t.setAttribute("audio-speed",2),t.querySelector("audio").playbackRate=2;break;case 2:e.innerHTML="x0.25",t.setAttribute("audio-speed",.25),t.querySelector("audio").playbackRate=.25}}}function changeLoop(e,t="video"){if("video"===t){const t=e.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;"off"===e.innerText.toLowerCase()?(e.innerText="On",t.querySelector("video").loop=!0):(e.innerText="Off",t.querySelector("video").loop=!1)}else{const t=e.parentElement.parentElement.parentElement.parentElement.parentElement;"off"===e.innerText.toLowerCase()?(e.innerText="On",t.querySelector("audio").loop=!0):(e.innerText="Off",t.querySelector("audio").loop=!1)}}function changeQuality(e,t){let r=Object.keys(t),a=Object.values(t);r.sort(),a.sort();let i=r.indexOf(e.innerText);i=i-1<0?r.length-1:i-1,e.innerText=r[i];const l=e.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;l.setAttribute("video-quality",r[i].toLowerCase());const n=l.querySelector("video");n.querySelector("source").src=a[i],n.load(),n.play(),changePlayState(l.querySelector(".playstatebtn"),"playing")}function hexToRgb(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function changeSubtitle(e,t){!t.items.Off&&(t.items.Off="Off");let r=Object.keys(t.items),a=Object.values(t.items);r.sort(),a.sort();let i=r.indexOf(e.innerText),l=navigator.language||navigator.userLanguage;const n=new Intl.DisplayNames([l],{type:"language"});i=i+1>r.length-1?0:i+1,e.innerText=r[i],e.parentElement.querySelector(".vidsubtitle-label").innerText="("+n.of(r[i])+")";const s=e.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;s.setAttribute("video-subtitle",r[i].toLowerCase());const o=s.querySelector("video");if("off"===r[i].toLowerCase())o.textTracks&&(o.textTracks[0].mode="hidden"),o.querySelector("track").remove();else{let e,l=n.of(r[i]);o.querySelector("track")?(o.querySelector("track").remove(),e=document.createElement("track"),e.src=a[i],e.kind="subtitles",e.srclang=r[i].toLowerCase(),e.label=l,t.hasOwnProperty("template")&&(document.documentElement.style.setProperty("--track-size",t.template.size),document.documentElement.style.setProperty("--track-color-opacity",t.template["color-opacity"]?t.template["color-opacity"]:1),document.documentElement.style.setProperty("--track-bg-opacity",t.template["bg-opacity"]?t.template["bg-opacity"]:1),document.documentElement.style.setProperty("--track-color",hexToRgb(t.template.color).r+","+hexToRgb(t.template.color).g+","+hexToRgb(t.template.color).b+",var(--track-color-opacity)"),document.documentElement.style.setProperty("--track-bg",hexToRgb(t.template.bg).r+","+hexToRgb(t.template.bg).g+","+hexToRgb(t.template.bg).b+",var(--track-bg-opacity)"),document.documentElement.style.setProperty("--track-font",t.template.family?t.template.family:"sans-serif")),o.appendChild(e),o.textTracks&&(o.textTracks[0].mode="showing")):(e=document.createElement("track"),e.src=a[i],e.kind="subtitles",e.srclang=r[i].toLowerCase(),e.label=l,t.hasOwnProperty("template")&&(document.documentElement.style.setProperty("--track-size",t.template.size),document.documentElement.style.setProperty("--track-color-opacity",t.template["color-opacity"]?t.template["color-opacity"]:1),document.documentElement.style.setProperty("--track-bg-opacity",t.template["bg-opacity"]?t.template["bg-opacity"]:1),document.documentElement.style.setProperty("--track-color",hexToRgb(t.template.color).r+","+hexToRgb(t.template.color).g+","+hexToRgb(t.template.color).b+",var(--track-color-opacity)"),document.documentElement.style.setProperty("--track-bg",hexToRgb(t.template.bg).r+","+hexToRgb(t.template.bg).g+","+hexToRgb(t.template.bg).b+",var(--track-bg-opacity)"),document.documentElement.style.setProperty("--track-font",t.template.family?t.template.family:"sans-serif")),o.appendChild(e),o.textTracks&&(o.textTracks[0].mode="showing"))}}function copyImgURL(e){try{navigator.clipboard.writeText(e.getAttribute("data-img-url"))}catch(e){return alert("Failed to copy"),!1}alert("Copied URL")}async function copyImg(e){const t=await fetch(e.getAttribute("data-img-url")),r=await t.blob();await(async e=>{const t=[new ClipboardItem({[e.type]:e})];try{await navigator.clipboard.write(t)}catch(e){return alert("Failed to copy to clipboard"),console.error(e),!1}alert("Successfully copied to clipboard!")})(r)}function downloadImg(e){fetch(e.getAttribute("data-img-url")).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="filename",document.body.appendChild(r),r.click(),document.body.removeChild(r)}))}function slideMove(e,t,r){t=parseInt(t),t+=r,e.setAttribute("slide-index",t),showSlides(e,t)}function currentSlide(e,t){e.setAttribute("slide-index",t),showSlides(e,i=t)}function showSlides(e,t,r=1){let a=r,i=e.querySelectorAll(".slide"),l=e.querySelectorAll(".dot");for(t>i.length&&e.setAttribute("slide-index",1),t<1&&e.setAttribute("slide-index",i.length),a=0;a<i.length;a++)i[a].style.display="none";for(a=0;a<l.length;a++)l[a].className=l[a].className.replace(" active","");i[parseInt(e.getAttribute("slide-index"))-1].style.display="block",l[parseInt(e.getAttribute("slide-index"))-1].className+=" active"}function showSlidesAuto(e,t=1){let r=t,a=e.querySelectorAll(".slide"),i=e.querySelectorAll(".dot");for(r=0;r<a.length;r++)a[r].style.display="none";for(r=0;r<i.length;r++)i[r].className=i[r].className.replace(" active","");parseInt(e.getAttribute("slide-index"))>a.length&&e.setAttribute("slide-index",1),a[parseInt(e.getAttribute("slide-index"))-1].style.display="block",i[parseInt(e.getAttribute("slide-index"))-1].className+=" active";let l=parseInt(e.getAttribute("slide-index"));l+=1,e.setAttribute("slide-index",l)}function openModal(e){e.parentElement.querySelector(".modal").style.display="block"}function closeModal(e){e.parentElement.style.display="none"}function lightboxplusSlides(e,t){i=parseInt(e.getAttribute("slide-index")),i+=t,e.setAttribute("slide-index",i),lightBoxSlide(e,i)}function lightboxCurrentSlide(e,t){e.setAttribute("slide-index",t),lightBoxSlide(e,i=t)}function lightBoxSlide(e,t){var r,a=e.querySelectorAll(".slide"),i=e.querySelectorAll(".demo"),l=e.querySelector(".caption");for(t>a.length&&e.setAttribute("slide-index",1),t<1&&e.setAttribute("slide-index",a.length),slideIndex=parseInt(e.getAttribute("slide-index")),r=0;r<a.length;r++)a[r].style.display="none";for(r=0;r<i.length;r++)i[r].className=i[r].className.replace(" active","");a[slideIndex-1].style.display="block",i[slideIndex-1].className+=" active",l&&(l.innerHTML=i[slideIndex-1].getAttribute("img-desc"))}
